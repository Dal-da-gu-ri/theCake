<!--
이메일 중복확인 - check_email 변수에 담아주세요.
사업자등록번호 유효한 지 - 함수로 확인
이메일 인증하기 - BACKEND 구역
-->

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/body.css">
    <link rel="stylesheet" href="/static/css/signUp_baker.css">
    <title>회원가입_baker</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>


<body class="text-center">
 <form method = "POST" class="form-signup">
    <img class="mb-4" src="/static/img/logo_baker.png" alt="logo_baker" width="141" height="120">
      {% csrf_token %}
     <!-- <div class="row mt-5">
        <div class="col-12">
            {{error}}
        </div>
    </div> -->
    <div class="form-inline form-group error_space">
        <label for="userid" class="col-4 col-sm-4 control-label">아이디</label>
        <input
        type="text"
        class="col-8 form-control"
        placeholder="기입하였던 아이디를 입력하세요."
        id="userid"
        name="userid"
        check_result="fail"
        required>
     <!-- 이 name 값으로 정보가 전달된다 -->
    </div>
<!--    <div class="my-1" style="text-align: right;">-->
<!--        <button class="btn btn-sm btn-secondary" id="id_check" onclick="id_overlap_check()">중복확인</button>-->
<!--    </div>-->
    <div id="id_right" class="text-nowrap mt-1 right">
        <p>사용가능한 아이디입니다.</p>
    </div>
    <div id="id_error" class="text-nowrap mt-1 error">
        <p>이미 사용중이거나 탈퇴한 아이디입니다.</p>
    </div>


    <div class="form-inline form-group">
      <label for="name_baker" class="col-4 col-sm-4 control-label">성명</label>
      <input
      type="text"
      class="col-8 form-control"
      id="name_baker"
      placeholder="이름을 입력해주세요."
      name="name_baker"
      required>
      <!-- 이 name 값으로 정보가 전달된다 -->
    </div>

    <div class="form-inline form-group error_space">
      <label for="email_baker" class="col-4 col-sm-4 control-label">이메일</label>
      <input
      type="email"
      class="col-8 form-control"
      id="email_baker"
      placeholder="이메일을 입력해주세요."
      name="email_baker"
      required>
    </div>
<!--    <div class="my-1" style="text-align: right;">-->
<!--        <button class="btn btn-sm btn-secondary">중복확인</button>-->
<!--    </div>-->
    <div id="email_error" class="text-nowrap mt-1 error">
        이미 사용중이거나 탈퇴한 이메일입니다.
    </div>

<!--여기 수정되어야 함-->
<!--check_email이 참이면 사용가능한 이메일입니다.-->
<!--check_email이 거짓이면 중복되는 이메일입니다.-->
<!--     <script>-->
<!--        $(function(){-->
<!--            $("#email_success").hide();-->
<!--            $("#email_fail").hide();-->

<!--            $("#btn-email").click(function(){-->
<!--                if ({{baker.checkEmail}}==TRUE){-->
<!--                    $("#email_success").show();-->
<!--                    $("#email_fail").hide();-->
<!--                }-->
<!--                else{-->
<!--                    $("#email_success").hide();-->
<!--                    $("#email_fail").show();-->
<!--                }-->
<!--            });-->

<!--        })-->
<!--     </script>-->


    <div class="form-inline form-group">
      <label for="password_baker" class="col-4 col-sm-4 control-label">비밀번호</label>
      <input type="password"
      class="col-8 form-control"
      id="password_baker"
      placeholder="8자리 이상, 대소문자 포함"
      name= "password_baker"
      minlength="8"
      required>
    </div>
    <!-- <div id="pw_error_length" class="text-nowrap mt-1 error">
        비밀번호는 8자 이상(대소문자,숫자 포함)이어야 합니다.
    </div> -->

    <div class="form-inline form-group">
      <label for="re-password_baker" class="col-4 col-sm-4 control-label" >비밀번호 확인</label>
      <input type="password"
      class="col-8 form-control"
      id="re-password_baker"
      placeholder="비밀번호 재입력"
      name= "re-password_baker"
      required>
    </div>
     <div class="alert alert-success mt-1" id="alert-success1">비밀번호가 일치합니다.</div>
     <div class="alert alert-danger mt-1" id="alert-danger1">비밀번호가 일치하지 않습니다.</div>
    <!-- <div id="pw_error" class="text-nowrap mt-1 error">
        비밀번호가 일치하지 않습니다.
    </div>
    <div id="pw_right" class="text-nowrap mt-1 right">
        비밀번호가 일치합니다.
    </div> -->

    <div class="form-inline form-group">
      <label for="phoneNum_baker" class="col-4 col-sm-4 control-label" >휴대전화</label>
      <input
      type="tel"
      class="col-8 form-control"
      id="phoneNum_baker"
      placeholder="예) 010-1234-5678"
      pattern="(010)-\d{3,4}-\d{4}"
      name="phoneNum_baker"
      required>
    </div>
      <!-- 이 name 값으로 정보가 전달된다 -->
<!--여기 수정되어야 함
check_businessID이 참이면 유효한 사업자등록번호입니다.
     <script>
        $(function(){
            $("#businessID_success").hide();
            $("#businessID_fail").hide();

            $("#btn-businessID").click(function(){
                if (check_businessID==TRUE){
                    $("#businessID_success").show();
                    $("#businessID_fail").hide();
                else {
                    $("#businessID_success").hide();
                    $("#businessID_fail").show();
                }
            });
        })
     </script>

check_businessID이 거짓이면 유효하지 않는 사업자등록번호입니다.-->
    <button type="submit" id="submit" class="btn btn-secondary btn-block">SIGN UP</button>
 </form>
</body>
</html>

<script type="text/javascript">
    $(document).ready(function(){
<!--        $("#id_right").hide();-->
<!--        $("#id_error").hide();-->
<!--        $("#email_error").hide();-->
<!--        $("#pw_error").hide();-->
<!--        $("#pw_right").hide();-->
    })
</script>

<!-- 아이디중복확인 -->
<!--<script type="text/javascript">-->
<!--    function id_overlap_check(){-->
<!--        &lt;!&ndash;중복확인을 했더라도 아이디를 다시 수정할 경우&ndash;&gt;-->
<!--        $("#userid").change(function(){-->
<!--            $("#id_check").show();-->
<!--            $("#userid").attr("check_result", "fail");-->

<!--            if($("#userid").val() == ''){-->
<!--                alert('아이디를 입력해주세요.')-->
<!--                return;-->
<!--            }-->
<!--        })-->

<!--        id_overlap_input = document.querySelector('input[name="userid"]');-->

<!--        $.ajax({-->
<!--            url:"{% url 'baker:isID_baker' %}",-->
<!--    &lt;!&ndash;        type: 'get',&ndash;&gt;-->
<!--            data: {-->
<!--                'username': id_overlap_input.value-->
<!--            },-->
<!--            dataType: 'json',-->
<!--            success: function(data){-->
<!--                if(data['overlap'] == "fail"){-->
<!--                    alert("이미 존재하는 아이디 입니다.");-->
<!--                    return;-->
<!--                }-->
<!--                else{-->
<!--                    alert("사용가능한 아이디 입니다.");-->
<!--                    $("#userid").attr("check_result", "success");-->
<!--                    $("#id_check").hide();-->
<!--                    return;-->
<!--                }-->
<!--            }-->
<!--        });-->
<!--    }-->
<!--</script>-->

<script type="text/javascript">
    $(document).ready(function(){
            $("#id_error").hide();
            $("#id_right").hide();
        <!--중복확인을 했더라도 아이디를 다시 수정할 경우-->
        $("#userid").change(function(){
            $("#id_error").hide();
            $("#id_right").hide();
            $("#userid").attr("check_result", "fail");

            if($("#userid").val() == ''){
                alert('아이디를 입력해주세요.')
                return;
            }
        })

        id_overlap_input = document.querySelector('input[name="userid"]');

        $.ajax({
            url:"{% url 'baker:isID_baker' %}",
    <!--        type: 'get',-->
            data: {
                'username': id_overlap_input.value
            },
            dataType: 'json',
            success: function(data){
                if(data['overlap'] == "fail"){
                    alert("이미 존재하는 아이디 입니다.");
                    return;
                }
                else{
                    alert("사용가능한 아이디 입니다.");
                    $("#userid").attr("check_result", "success");
                    $("#id_check").hide();
                    return;
                }
            }
        });
    }
</script>


<!-- 비밀번호 같은지 확인 -->
// <script type="text/javascript">

//     $(function () {
//         var reg = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/g;

//         $("#pw_error_length").hide();

//         var pw = $("#password_baker").val();

//         $("#password_baker").focusin(function(){
//             $("#pw_error_length").hide();
//         });

//         $("#password_baker").focusout(function(){
//             if(false === reg.test(pw)){
//                 $("#pw_error_length").show();
//                 $("#re-password_baker").attr("disabled", "disabled");
//             }
//             else{
//                 $("#pw_error_length").hide();
//                 $("#re-password_baker").removeAttr("disabled");
//             }
//         });

//     });

//     $(function () {
//         $("#pw_right").hide();
//         $("#pw_error").hide();
//         $("#submit").attr("disabled", "disabled");

//         $("#re-password_baker").keyup(function() {
//             var pwd1=$("#password_baker").val();
//             var pwd2=$("#re-password_baker").val();


//             if (pwd1 != "" || pwd2 != "") {
//                 if (pwd1 == pwd2) {
//                     $("#pw_right").show();
//                     $("#pw_error").hide();
//                     $("#submit").removeAttr("disabled");
//                 } else {
//                     $("#pw_right").hide();
//                     $("#pw_error").show();
//                 }
//             }
//         });
//     });
// </script>


<!-- 비밀번호 -->
<script type="text/javascript">
    $(function () {
        $("#alert-success1").hide();
        $("#alert-danger1").hide();
        $("#submit").attr("disabled", "disabled");

        var reg = /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$/g;

        var pwd1 = $("#password_baker").val();

        if(pwd1 == ''){
            document.getElementById("#alert-danger1").innerHTML = "필수정보입니다.";
            $("#alert-danger1").show();
        }

        else{
            if(false === reg.test(pw)){
                $("#pw_error_length").show();
                $("#re-password_baker").attr("disabled", "disabled");
            }
            else{
                $("#re-password_baker").keyup(function() {
                    var pwd2=$("#re-password_baker").val();

                    if (pwd1 != "" || pwd2 != "") {
                        if (pwd1 == pwd2) {
                            $("#alert-success1").show();
                            $("#alert-danger1").hide();
                            $("#submit").removeAttr("disabled");
                        } else {
                            $("#alert-success1").hide();
                            $("#alert-danger1").show();
                        }
                    }
                });
            }
        }
    });
</script>